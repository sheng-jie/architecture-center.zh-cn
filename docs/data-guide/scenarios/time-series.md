---
title: "时序数据"
description: 
author: zoinerTejada
ms:date: 02/12/2018
ms.openlocfilehash: ceb8f34d4fd950e5270edfea05945a824c4492f0
ms.sourcegitcommit: 90cf2de795e50571d597cfcb9b302e48933e7f18
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/14/2018
---
# <a name="time-series-solutions"></a><span data-ttu-id="9e593-102">时序解决方案</span><span class="sxs-lookup"><span data-stu-id="9e593-102">Time series solutions</span></span>

<span data-ttu-id="9e593-103">时序数据是按时间组织的一组值。</span><span class="sxs-lookup"><span data-stu-id="9e593-103">Time series data is a set of values organized by time.</span></span> <span data-ttu-id="9e593-104">时序数据的示例包括传感器数据、股票价格、点击流数据和应用程序遥测数据。</span><span class="sxs-lookup"><span data-stu-id="9e593-104">Examples of time series data include sensor data, stock prices, click stream data, and application telemetry.</span></span> <span data-ttu-id="9e593-105">可以分析时序数据以生成历史趋势、实时警报或预测建模。</span><span class="sxs-lookup"><span data-stu-id="9e593-105">Time series data can be analyzed for historical trends, real-time alerts, or predictive modeling.</span></span>

![时序见解](./images/time-series-insights.png) 

<span data-ttu-id="9e593-107">时序数据表示资产或过程是如何随时间变化的。</span><span class="sxs-lookup"><span data-stu-id="9e593-107">Time series data represents how an asset or process changes over time.</span></span> <span data-ttu-id="9e593-108">这些数据带有时间戳，但更重要的是，时间才是用于查看或分析数据的最有意义的轴。</span><span class="sxs-lookup"><span data-stu-id="9e593-108">The data has a timestamp, but more importantly, time is the most meaningful axis for viewing or analyzing the data.</span></span> <span data-ttu-id="9e593-109">时序数据通常按时间顺序到达，通常被视为插入，而不是数据库的更新。</span><span class="sxs-lookup"><span data-stu-id="9e593-109">Time series data typically arrives in order of time and is usually treated as an insert rather than an update to your database.</span></span> <span data-ttu-id="9e593-110">因此，可以测量不同时间发生的变化，以便追溯过去的变化和预测将来的变化。</span><span class="sxs-lookup"><span data-stu-id="9e593-110">Because of this, change is measured over time, enabling you to look backward and to predict future change.</span></span> <span data-ttu-id="9e593-111">正因如此，最好是使用散点图或折线图将时序数据可视化。</span><span class="sxs-lookup"><span data-stu-id="9e593-111">As such, time series data is best visualized with scatter or line charts.</span></span>

![在折线图中可视化的时序数据](./images/time-series-chart.png)

<span data-ttu-id="9e593-113">时序数据的一些示例包括：</span><span class="sxs-lookup"><span data-stu-id="9e593-113">Some examples of time series data are:</span></span>

- <span data-ttu-id="9e593-114">捕获一段时间的股票价格以检测趋势。</span><span class="sxs-lookup"><span data-stu-id="9e593-114">Stock prices captured over time to detect trends.</span></span>
- <span data-ttu-id="9e593-115">服务器性能，例如 CPU 使用率、I/O 负载、内存使用率和网络带宽消耗量。</span><span class="sxs-lookup"><span data-stu-id="9e593-115">Server performance, such as CPU usage, I/O load, memory usage, and network bandwidth consumption.</span></span>
- <span data-ttu-id="9e593-116">工业设备传感器发出的遥测数据，可用于检测待处理的设备故障和触发警报通知。</span><span class="sxs-lookup"><span data-stu-id="9e593-116">Telemetry from sensors on industrial equipment, which can be used to detect pending equipment failure and trigger alert notifications.</span></span>
- <span data-ttu-id="9e593-117">实时汽车遥测数据（包括某个时间范围内的车速、刹车状况和加速能力），以便为驾驶员生成聚合风险评分。</span><span class="sxs-lookup"><span data-stu-id="9e593-117">Real-time car telemetry data including speed, braking, and acceleration over a time window to produce an aggregate risk score for the driver.</span></span>

<span data-ttu-id="9e593-118">在上述每种情况下，都可以看到，时间是最有意义的轴。</span><span class="sxs-lookup"><span data-stu-id="9e593-118">In each of these cases, you can see how time is most meaningful as an axis.</span></span> <span data-ttu-id="9e593-119">按事件的抵达顺序显示事件是时序数据的一个关键特征，因为存在自然的时态顺序。</span><span class="sxs-lookup"><span data-stu-id="9e593-119">Displaying the events in the order in which they arrived is a key characteristic of time series data, as there is a natural temporal ordering.</span></span> <span data-ttu-id="9e593-120">这不同于从标准 OLTP 数据管道捕获的数据，在此类管道中，数据可能无序进入并随时更新。</span><span class="sxs-lookup"><span data-stu-id="9e593-120">This differs from data captured for standard OLTP data pipelines where data can be entered in any order, and updated at any time.</span></span>

## <a name="when-to-use-this-solution"></a><span data-ttu-id="9e593-121">何时使用此解决方案</span><span class="sxs-lookup"><span data-stu-id="9e593-121">When to use this solution</span></span>

<span data-ttu-id="9e593-122">如果需要引入其战略值以一段时间内的变化为中心的数据，并且主要是插入新数据而极少更新数据（甚至根本不会更新），请选择时序解决方案。</span><span class="sxs-lookup"><span data-stu-id="9e593-122">Choose a time series solution when you need to ingest data whose strategic value is centered around changes over a period of time, and you are primarily inserting new data and rarely updating, if at all.</span></span> <span data-ttu-id="9e593-123">可以使用此信息来检测异常、可视化趋势、将当前数据与历史数据相比较，等等。</span><span class="sxs-lookup"><span data-stu-id="9e593-123">You can use this information to detect anomalies, visualize trends, and compare current data to historical data, among other things.</span></span> <span data-ttu-id="9e593-124">此类体系结构最适合用于预测建模和预测结果，因为在一段时间后，可以获得变化的历史记录，并将其应用到任意数量的预测模型。</span><span class="sxs-lookup"><span data-stu-id="9e593-124">This type of architecture is also best suited for predictive modeling and forecasting results, because you have the historical record of changes over time, which can be applied to any number of forecasting models.</span></span> 

<span data-ttu-id="9e593-125">时序提供以下优势：</span><span class="sxs-lookup"><span data-stu-id="9e593-125">Using time series offers the following benefits:</span></span>

* <span data-ttu-id="9e593-126">明确呈现资产或过程在不同时间的变化。</span><span class="sxs-lookup"><span data-stu-id="9e593-126">Clearly represents how an asset or process changes over time.</span></span>
* <span data-ttu-id="9e593-127">帮助你快速检测许多相关源的变化，突出异常和新的趋势。</span><span class="sxs-lookup"><span data-stu-id="9e593-127">Helps you quickly detect changes to a number of related sources, making anomalies and emerging trends clearly stand out.</span></span>
* <span data-ttu-id="9e593-128">最适合预测建模和预测。</span><span class="sxs-lookup"><span data-stu-id="9e593-128">Best suited for predictive modeling and forecasting.</span></span>

### <a name="internet-of-things-iot"></a><span data-ttu-id="9e593-129">物联网 (IoT)</span><span class="sxs-lookup"><span data-stu-id="9e593-129">Internet of Things (IoT)</span></span>

<span data-ttu-id="9e593-130">IoT 设备收集的数据原生就很适合时序存储和分析。</span><span class="sxs-lookup"><span data-stu-id="9e593-130">Data collected by IoT devices is a natural fit for time series storage and analysis.</span></span> <span data-ttu-id="9e593-131">传入的数据将会插入而极少更新（甚至不会更新）。</span><span class="sxs-lookup"><span data-stu-id="9e593-131">The incoming data is inserted and rarely, if ever, updated.</span></span> <span data-ttu-id="9e593-132">数据带有时间戳，按接收顺序插入并按时间顺序显示，使用户能够发现趋势、查明异常，并将这些信息用于预测分析。</span><span class="sxs-lookup"><span data-stu-id="9e593-132">The data is time stamped and inserted in the order it was received, and this data is typically displayed in chronological order, enabling users to discover trends, spot anomalies, and use the information for predictive analysis.</span></span>

<span data-ttu-id="9e593-133">有关详细信息，请参阅[物联网](../concepts/big-data.md#internet-of-things-iot)。</span><span class="sxs-lookup"><span data-stu-id="9e593-133">For more information, see [Internet of Things](../concepts/big-data.md#internet-of-things-iot).</span></span>

### <a name="real-time-analytics"></a><span data-ttu-id="9e593-134">实时分析</span><span class="sxs-lookup"><span data-stu-id="9e593-134">Real-time analytics</span></span>

<span data-ttu-id="9e593-135">时序数据通常是时间敏感的 &mdash; 也就是说，必须快速处理，以实时查明趋势或生成警报。</span><span class="sxs-lookup"><span data-stu-id="9e593-135">Time series data is often time sensitive &mdash; that is, it must be acted on quickly, to spot trends in real time or generate alerts.</span></span> <span data-ttu-id="9e593-136">在这种情况下，生成见解出现任何延迟都可能导致停机和业务影响。</span><span class="sxs-lookup"><span data-stu-id="9e593-136">In these scenarios, any delay in insights can cause downtime and business impact.</span></span> <span data-ttu-id="9e593-137">此外，通常需要关联来自各种不同源（例如传感器）的数据。</span><span class="sxs-lookup"><span data-stu-id="9e593-137">In addition, there is often a need to correlate data from a variety of different sources, such as sensors.</span></span>

<span data-ttu-id="9e593-138">最好是部署一个流处理层来实时处理传入的数据，并以较高的精度和粒度处理所有这些数据。</span><span class="sxs-lookup"><span data-stu-id="9e593-138">Ideally, you would have a stream processing layer that can handle the incoming data in real time and process all of it with high precision and high granularity.</span></span> <span data-ttu-id="9e593-139">根据流体系结构和流缓冲与流处理层的组件，有时做不到这一点。</span><span class="sxs-lookup"><span data-stu-id="9e593-139">This isn't always possible, depending on your streaming architecture and the components of your stream buffering and stream processing layers.</span></span> <span data-ttu-id="9e593-140">可能需要减少时序数据来部分地降低精度。</span><span class="sxs-lookup"><span data-stu-id="9e593-140">You may need to sacrifice some precision of the time series data by reducing it.</span></span> <span data-ttu-id="9e593-141">为此，可以处理滑动时间窗口（例如若干秒），使处理层能够及时执行计算。</span><span class="sxs-lookup"><span data-stu-id="9e593-141">This is done by processing sliding time windows (several seconds, for example), allowing the processing layer to perform calculations in a timely manner.</span></span> <span data-ttu-id="9e593-142">在显示较长时间的数据时，还可能需要向下采样和聚合数据，例如，进行缩放以显示过去几个月捕获的数据。</span><span class="sxs-lookup"><span data-stu-id="9e593-142">You may also need to downsample and aggregate your data when displaying longer periods of time, such as zooming to display data captured over several months.</span></span>

## <a name="challenges"></a><span data-ttu-id="9e593-143">挑战</span><span class="sxs-lookup"><span data-stu-id="9e593-143">Challenges</span></span>

* <span data-ttu-id="9e593-144">时序数据通常很大，尤其是在 IoT 方案中。</span><span class="sxs-lookup"><span data-stu-id="9e593-144">Time series data is often very high volume, especially in IoT scenarios.</span></span> <span data-ttu-id="9e593-145">存储、索引、查询、分析和可视化时序数据可能很困难。</span><span class="sxs-lookup"><span data-stu-id="9e593-145">Storing, indexing, querying, analyzing, and visualizing time series data can be challenging.</span></span> 
* <span data-ttu-id="9e593-146">可能很难找到高速存储与强大计算操作的适当组合来处理实时分析，同时最小化面市时间和总体投资成本。</span><span class="sxs-lookup"><span data-stu-id="9e593-146">It can be challenging to find the right combination of high-speed storage and powerful compute operations for handling real-time analytics, while minimizing time to market and overall cost investment.</span></span>

## <a name="architecture"></a><span data-ttu-id="9e593-147">体系结构</span><span class="sxs-lookup"><span data-stu-id="9e593-147">Architecture</span></span>

<span data-ttu-id="9e593-148">在涉及到时序数据的许多方案（例如 IoT）中，数据是实时捕获的。</span><span class="sxs-lookup"><span data-stu-id="9e593-148">In many scenarios that involve time series data, such as IoT, the data is captured in real time.</span></span> <span data-ttu-id="9e593-149">因此，[实时处理](./real-time-processing.md)体系结构比较适合。</span><span class="sxs-lookup"><span data-stu-id="9e593-149">As such, a [real-time processing](./real-time-processing.md) architecture is appropriate.</span></span> 

<span data-ttu-id="9e593-150">[IoT 中心](/azure/iot-hub/)、[事件中心](/azure/event-hubs/)或 [Kafka on HDInsight](/azure/hdinsight/kafka/apache-kafka-introduction) 会将一个或多个数据源的数据引入流缓冲层。</span><span class="sxs-lookup"><span data-stu-id="9e593-150">Data from one or more data sources is ingested into the stream buffering layer by [IoT Hub](/azure/iot-hub/), [Event Hubs](/azure/event-hubs/), or [Kafka on HDInsight](/azure/hdinsight/kafka/apache-kafka-introduction).</span></span> <span data-ttu-id="9e593-151">接下来，在流处理层中处理数据。该层可以选择性地将处理后的数据转发到机器学习服务进行预测分析。</span><span class="sxs-lookup"><span data-stu-id="9e593-151">Next, the data is processed in the stream processing layer that can optionally hand off the processed data to a machine learning service for predictive analytics.</span></span> <span data-ttu-id="9e593-152">处理后的数据存储在 [HBase](/azure/hdinsight/hbase/apache-hbase-overview)、[Azure Cosmos DB](/azure/cosmos-db/)、Azure Data Lake 或 Blob 存储等分析数据存储中。</span><span class="sxs-lookup"><span data-stu-id="9e593-152">The processed data is stored in an analytical data store, such as [HBase](/azure/hdinsight/hbase/apache-hbase-overview), [Azure Cosmos DB](/azure/cosmos-db/), Azure Data Lake, or Blob Storage.</span></span> <span data-ttu-id="9e593-153">可以使用 Power BI 或 OpenTSDB（如果数据存储在 HBase 中）等分析和报告应用程序或服务来显示要分析的时序数据。</span><span class="sxs-lookup"><span data-stu-id="9e593-153">An analytics and reporting application or service, like Power BI or OpenTSDB (if stored in HBase) can be used to display the time series data for analysis.</span></span>

<span data-ttu-id="9e593-154">另一个选项是使用 [Azure 时序见解](/azure/time-series-insights/)。</span><span class="sxs-lookup"><span data-stu-id="9e593-154">Another option is to use [Azure Time Series Insights](/azure/time-series-insights/).</span></span> <span data-ttu-id="9e593-155">时序见解是处理时序数据的完全托管服务。</span><span class="sxs-lookup"><span data-stu-id="9e593-155">Time Series Insights is a fully managed service for time series data.</span></span> <span data-ttu-id="9e593-156">在此体系结构中，时序见解执行流处理、数据存储以及分析和报告的角色。</span><span class="sxs-lookup"><span data-stu-id="9e593-156">In this architecture, Time Series Insights performs the roles of stream processing, data store, and analytics and reporting.</span></span> <span data-ttu-id="9e593-157">它从 IoT 中心或事件中心接受流数据，并近乎实时地存储、处理、分析和显示数据。</span><span class="sxs-lookup"><span data-stu-id="9e593-157">It accepts streaming data from either IoT Hub or Event Hubs and stores, processes, analyzes, and displays the data in near real time.</span></span> <span data-ttu-id="9e593-158">它不会预先聚合数据，而是存储原始事件。</span><span class="sxs-lookup"><span data-stu-id="9e593-158">It does not pre-aggregate the data, but stores the raw events.</span></span>

<span data-ttu-id="9e593-159">时序见解采用自适应架构，这意味着，无需执行任何数据准备就能开始派生见解。</span><span class="sxs-lookup"><span data-stu-id="9e593-159">Time Series Insights is schema adaptive, which means that you do not have to do any data preparation to start deriving insights.</span></span> <span data-ttu-id="9e593-160">这样，便可以顺畅地浏览、比较和关联各种数据源。</span><span class="sxs-lookup"><span data-stu-id="9e593-160">This enables you to explore, compare, and correlate a variety of data sources seamlessly.</span></span> <span data-ttu-id="9e593-161">时序见解还提供类似于 SQL 的筛选器和聚合，能够构造、可视化、比较和覆盖各种时序模式与热图，并可以保存和共享查询。</span><span class="sxs-lookup"><span data-stu-id="9e593-161">It also provides SQL-like filters and aggregates, ability to construct, visualize, compare, and overlay various time series patterns, heat maps, and the ability to save and share queries.</span></span> 

## <a name="technology-choices"></a><span data-ttu-id="9e593-162">技术选择</span><span class="sxs-lookup"><span data-stu-id="9e593-162">Technology choices</span></span>

- [<span data-ttu-id="9e593-163">数据存储</span><span class="sxs-lookup"><span data-stu-id="9e593-163">Data Storage</span></span>](../technology-choices/data-storage.md)
- [<span data-ttu-id="9e593-164">分析、可视化和报告</span><span class="sxs-lookup"><span data-stu-id="9e593-164">Analysis, visualizations, and reporting</span></span>](../technology-choices/analysis-visualizations-reporting.md)
- [<span data-ttu-id="9e593-165">分析数据存储</span><span class="sxs-lookup"><span data-stu-id="9e593-165">Analytical Data Stores</span></span>](../technology-choices/analytical-data-stores.md)
- [<span data-ttu-id="9e593-166">流处理</span><span class="sxs-lookup"><span data-stu-id="9e593-166">Stream processing</span></span>](../technology-choices/stream-processing.md)